pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
iterations=100
cutoff=2
camx=-.5
camy=0
cam_width=2
colors={1,2,5,4,3,9,13,6,15,14,12,8,11,10,7}
function mandel(screenx,screeny)
 local x=(screenx/63.5 - 1)
 local y=(screeny/63.5 - 1)
 x=camx + x*cam_width/2
 y=camy + y*cam_width/2
 local zx=0
 local zy=0
 for i=1,iterations do
  if abs(zx)+abs(zy) > cutoff then
   return colors[1+flr(i/iterations*15+rnd()-.5)]
  end
 
  local next_zx = zx*zx-zy*zy + x
  local next_zy = 2*zy*zx + y
  zx = next_zx
  zy = next_zy
 end
 
 return 0
end

function _init()

end

function _update60()
 if moved then
  return
 end
 
 if btn(0) then
  moved=true
  camx-=cam_width/16
 end
 if btn(1) then
  moved=true
  camx+=cam_width/16
 end
 if btn(2) then
  moved=true
  camy-=cam_width/16
 end
 if btn(3) then
  moved=true
  camy+=cam_width/16
 end
 if btn(4) then
  moved=true
  cam_width*=.95
 end
 if btn(5) then
  moved=true
  cam_width*=1.05
 end
end

redraw_steps={
 {1,1},
 {0,1},
 {1,0}
}
max_draw_width=16
draw_width=max_draw_width
moved=true
delayer=0
function _draw()
 if moved then
  cls()
  draw_width=max_draw_width
  for x=0,127,draw_width do
   for y=0,127,draw_width do
    rectfill(x,y,x+draw_width-1,y+draw_width-1,mandel(x,y,0,0,iterations))
   end
  end
  
  draw_width/=2
  redraw_i=1
  redraw_col=0
  redraw_row=0
  moved=false
 elseif draw_width >= 1 then
  local step=redraw_steps[redraw_i]  
  local xoff=step[1]*draw_width + redraw_col*draw_width*2
  local yoff=step[2]*draw_width + redraw_row*draw_width*2
  for x=xoff,127,max_draw_width do
   for y=yoff,127,max_draw_width do
    rectfill(x,y,x+draw_width-1,y+draw_width-1,mandel(x,y,0,0,iterations))
   end
  end
  redraw_i+=1
  
  if redraw_i > #redraw_steps then
   redraw_i=1
   redraw_col+=1
  end
  
  if redraw_col*draw_width*2 > max_draw_width then
   redraw_col=0
   redraw_row+=1
  end
  
  if redraw_row*draw_width*2 > max_draw_width then
   redraw_row=0
   draw_width/=2
  end
 end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
222222222222222222222222222222224444444444444444444444444444444445555555555666667779aadfaaad8cfc33333333333333333333333333333333
2222222222222222222222222222222444444444444444444444444444444445555555555566666667889aaffcbeffc855533333333333333333333333333333
2222222222222222222222222222224444444444444444444444444444444455555555555666666667889abdffffc88875555553333333333333333333333333
22222222222222222222222222222444444444444444444444444444444455555555556666666666688899bcffebb88877655555555533333333333333333333
22222222222222222222222222224444444444444444444444444444455555555555566666666666688999ccffeba98877766555555555544444444333333333
22222222222222222222222222244444444444444444445555555555555555555555566666666666689999dfffccb99877766666555555555444444444444444
2222222222222222222222222244444444444444444444555555555555555555555556666666666688999efffffda99887766666555555555555444444444444
222222222222222222222222244444444444444444444455555555555555555555555666666666668aabdfff0fff999988666666555555555555555544444444
2222222222222222222222224444444444444444444444555555555555555555555556666666666bfbbccff000ffe99a98666666555555555555555444444444
22222222222222222222222444444444444444444444455555555555555555555555566666666bbdfedffff000ffecbccf666666655555555555555444444444
2222222222222222222222444444444444444444444445555555555555555555555556667777ef0fffffffff00fffcdffa666666655555555555555444444444
22222222222222222222244444444444444444444444455555555555555555555555666777889adeffff0000000ffffffb666666665555555555555444444444
22222222222222222222444444444444444444444444455555555555555555555555666777889abcf000000000000fffff866666666655555555555444444444
222222222222222222244444444444444444444444445555555555555555555555566677778899bdff0000000000000fdb886666666666555555555444444444
2222222222222222224444444444444444444444444455555555555555555555556677777889999fff000000000000ffca988666666666666666555544444444
222222222222222224444444444444444444444444445555555555555555555557777777888999dfff000000000000fffa998777777666666666655544444444
22222222222222224444444444444444444444444445555555555555555555557777788888899adff0000000000000fff9998887777666666666655544444444
2222222222222224444444444444444444444444444555555555555555555557777788888889abcef0000000000000ffd9998888777766666666665544444444
222222222222224444444444444444444444444444555555555555555555787777788888888aabccf0000000000000ffcb999888777777666677765544444444
22222222222224444444444444444444444444444455555555666666688989e77788888888abbbcdff00000000000ffecbba999987777777777789c554444444
2222222222224444444444444444444444444444455555555666677fceaa9cff99999aabcaabbbdefff0000000000ffedccaaaabf7777777777789fa54444444
22222222222444444444444444444444444444444555555556666779ffbeeffcaaa9aaefffddfffeffff00000000ffffddeeabbefc977788878889df84444444
22222222224444444444444444444444444444445555555566666778aefffffccaaabbfffffffff00fffff0000fff0fffff0fdffffba9998888999fb87444444
22222222244444444444444444444444444444445555555666667788adffffffffabcdff0fff000000000000000000000000fffffffa9998888abef988444444
22222222444444444444444444444444444444455555556666667888cffffffffffcddff00f000000000000000000000000ffff0ffdbaaafefbbbdfca9744444
22222224444444444444444444444444444444555555566666677888cefff00ffffff0ff000000000000000000000000000000000ffcbbbdfffdceffff864444
22222244444444444444444444444444444445555555666666777789abcfff0000fff0f000000000000000000000000000000000f0ffedcfffffffffd9864444
22222444444444444444444444444444444455555566666667777789aadff00000ff0000000000000000000000000000000000000000feff000f0ffffa876444
22224444444444444444444444444444444555556666677777777789aafff00000f000000000000000000000000000000000000000000ff000000ffdfb766544
22244444444444444444444444444444446666666666677777777799abdff000000000000000000000000000000000000000000000000ff00000ffcb97766654
22444444444444444444444444444444466666666666677777777999abcef0000000000000000000000000000000000000000000000000f00000fffb98766655
2444444444444444444444444444444666666666666667777777799bbccefff000000000000000000000000000000000000000000000000000000ff887766665
44444444444444444444444444444466666666666666777777789cffcdffff000000000000000000000000000000000000000000000000000000fec887766666
444444444444444444444444444466666666666666667777888fcf0feef000000000000000000000000000000000000000000000000000000fffeca887776666
44444444555544444444444446666666666666666666777788bffffffff0000000000000000000000000000000000000000000000000000000ffdba987777666
44444444555565555555666666666666666666666667777889afffff0f00000000000000000000000000000000000000000000000000000000f0fda988777666
44444445555669887777766666666666666666666677777889acff0000000000000000000000000000000000000000000000000000000000000ffff998887665
44444445555678fea777777666677766666666666777778899acdff000000000000000000000000000000000000000000000000000000000000000fb99997665
444444555566789cd977777877777877666666667777889999bbdfff000000000000000000000000000000000000000000000000000000000000f0ecaa9af665
444445555567779fe9977888888889f9777668888888889999bffff000000000000000000000000000000000000000000000000000000000000000fefbcbf965
444455555677779dc999888888899bfd98888888888889999aeffff00000000000000000000000000000000000000000000000000000000000000fffffefb975
44455555667778efdb99a9988889affba998888888888999affff00000000000000000000000000000000000000000000000000000000000000000f00fffef75
44555556667778acfbbaaadb8aaabffcbaa999888888999abdff0000000000000000000000000000000000000000000000000000000000000000000000f0e965
455556666667789cffffdcfcaaaacffffdabbf98888999aabcff0000000000000000000000000000000000000000000000000000000000000000000000ffb865
5556666666677899bdefff0efdccceffffcdffbaaaaaaabbbeff0000000000000000000000000000000000000000000000000000000000000000000f0fda8766
6666666666677889abcffffffedeefffffefffdcbaaaaabbd0ff0000000000000000000000000000000000000000000000000000000000000000000ffca98776
6666666666678889aaceff0ffffffff00ffffffddbaaabbceff00000000000000000000000000000000000000000000000000000000000000000000f0ba98776
6666666666688888aaceff000fff0ff00ffff0fffdcccbcddff00000000000000000000000000000000000000000000000000000000000000000000ffcaa8766
6666666666688888abfff0000ff000000000f0ffffdccccdf00000000000000000000000000000000000000000000000000000000000000000000000ffcd9766
666666666688888aabdfff0000000000000000000fffdddefff0000000000000000000000000000000000000000000000000000000000000000000000fff9666
666666666688889abceef0f000000000000000000ffffeefff000000000000000000000000000000000000000000000000000000000000000000000000ff8665
6666666668888aedcfeff0000000000000000000000fffffff00000000000000000000000000000000000000000000000000000000000000000000000ffb7665
6666666788889bffffff000000000000000000000000fffff0000000000000000000000000000000000000000000000000000000000000000000000ffba87655
666778999889aadff0ff0000000000000000000000000ffff00000000000000000000000000000000000000000000000000000000000000000000000fc987655
66678cc999aaaaceff0000000000000000000000000000ff000000000000000000000000000000000000000000000000000000000000000000000000ff977655
66779bfbaaaaaccfff0000000000000000000000000000ff000000000000000000000000000000000000000000000000000000000000000000000000ff876655
67789afdccbfdcdfff00000000000000000000000000000ff0000000000000000000000000000000000000000000000000000000000000000000000fc9766655
88889abfecdffeefff00000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000000000000fc8866655
8888aaceffffffff0000000000000000000000000000000f0000000000000000000000000000000000000000000000000000000000000000000000ff87766655
888aaacfffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa87766665
899aaddeff00000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa877766665
bfbccfffff000000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa9877766666
bfdceefff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa98877766666
fffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000feca99887776666
fffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000feca99887776666
bfdceefff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa98877766666
bfbccfffff000000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa9877766666
899aaddeff00000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa877766665
888aaacfffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000fa87766665
8888aaceffffffff0000000000000000000000000000000f0000000000000000000000000000000000000000000000000000000000000000000000ff87766655
88889abfecdffeefff00000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000000000000fc8866655
67789afdccbfdcdfff00000000000000000000000000000ff0000000000000000000000000000000000000000000000000000000000000000000000fc9766655
66779bfbaaaaaccfff0000000000000000000000000000ff000000000000000000000000000000000000000000000000000000000000000000000000ff876655
66678cc999aaaaceff0000000000000000000000000000ff000000000000000000000000000000000000000000000000000000000000000000000000ff977655
666778999889aadfffff0000000000000000000000000ffff00000000000000000000000000000000000000000000000000000000000000000000000fc987655
6666666788889bffffff000000000000000000000000fffff0000000000000000000000000000000000000000000000000000000000000000000000ffba87655
6666666668888aedcfeff0000000000000000000000fffffff00000000000000000000000000000000000000000000000000000000000000000000000ffb7665
666666666688889abceefff000000000000000000ffffeefff000000000000000000000000000000000000000000000000000000000000000000000000ff8665
666666666688888aabdfff00000000000000000f0fffdddefff0000000000000000000000000000000000000000000000000000000000000000000000fff9666
6666666666688888abfff0000ff000000000f0ffffdccccdf00000000000000000000000000000000000000000000000000000000000000000000000ffcd9766
6666666666688888aaceff0000ff0ff00ffffffffdcccbcddff00000000000000000000000000000000000000000000000000000000000000000000ffcaa8766
6666666666678889aaceff0ffffffff00ffffffddbaaabbceff00000000000000000000000000000000000000000000000000000000000000000000ffba98776
6666666666677889abcffffffedeefff0fefffdcbaaaaabbdfff0000000000000000000000000000000000000000000000000000000000000000000ffca98776
5556666666677899bdefff0efdccceffffcdffbaaaaaaabbbeff0000000000000000000000000000000000000000000000000000000000000000000fffda8766
455556666667789cffffdcfcaaaacffffdabbf98888999aabcf0000000000000000000000000000000000000000000000000000000000000000000000fffb865
44555556667778acfbbaaadb8aaabffcbaa999888888999abdff0000000000000000000000000000000000000000000000000000000000000000000000ffe965
44455555667778efdb99a9988889affba998888888888999affff00000000000000000000000000000000000000000000000000000000000000000f00fffef75
444455555677779dc999888888899bfd98888888888889999aeffff00000000000000000000000000000000000000000000000000000000000000fffffefb975
444445555567779fe9977888888889f9777668888888889999bffff00000000000000000000000000000000000000000000000000000000000000ffefbcbf965
444444555566789cd977777877777877666666667777889999bbdfff000000000000000000000000000000000000000000000000000000000000ffecaa9af665
44444445555678fea777777666677766666666666777778899acdff000000000000000000000000000000000000000000000000000000000000000fba9997665
44444445555669887777766666666666666666666677777889acff0000000000000000000000000000000000000000000000000000000000000ffff998887665
44444444555565555555666666666666666666666667777889afffff0f00000000000000000000000000000000000000000000000000000000f0fda988777666
44444444555544444444444446666666666666666666777788bffffffff0000000000000000000000000000000000000000000000000000000ffdba987777666
444444444444444444444444444466666666666666667777888fcfffeef000000000000000000000000000000000000000000000000000000fffeca887776666
44444444444444444444444444444466666666666666777777789cffcdffff000000000000000000000000000000000000000000000000000000fec887766666
2444444444444444444444444444444666666666666667777777799bbccefff000000000000000000000000000000000000000000000000000000ff887766665
22444444444444444444444444444444466666666666677777777999abceff000000000000000000000000000000000000000000000000f00000fffb98766655
22244444444444444444444444444444446666666666677777777799abdff000000000000000000000000000000000000000000000000ff00000ffcb97766654
22224444444444444444444444444444444555556666677777777789aafff00000f000000000000000000000000000000000000000000ff000000ffdfb766544
22222444444444444444444444444444444455555566666667777789aadff00000ff000000000000000000000000000000000000000ffef0f00f0ffffa876444
22222244444444444444444444444444444445555555666666777789abcfff0000fff0f000000000000000000000000000000000ffffedcfffffffffd9864444
22222224444444444444444444444444444444555555566666677888cefff00ffffff0ff000000000000000000000000000000000ffcbbbdfffdceffff864444
22222222444444444444444444444444444444455555556666667888cffffffffffcddff00f000000000000000000000000fff00ffdbaaafefbbbdfca9744444
22222222244444444444444444444444444444445555555666667788adffffffffabcdff0fff00000000000000000000000ffffffffa9998888abef988444444
22222222224444444444444444444444444444445555555566666778aefffffccaaabbfffffffff00fffff0000fff0fffff0fdefffba9998888999fb87444444
22222222222444444444444444444444444444444555555556666779ffbeeffcaaa9aaefffddfffefff000000000ffffddeeabbefc977788878889df84444444
2222222222224444444444444444444444444444455555555666677fceaa9cff99999aabcaabbbdefff0000000000ffedccaaaabf7777777777789fa54444444
22222222222224444444444444444444444444444455555555666666688989e77788888888abbbcdff00000000000ffecbba999987777777777789c554444444
222222222222224444444444444444444444444444555555555555555555787777788888888aabccf0000000000000ffcb999888777777666677765544444444
2222222222222224444444444444444444444444444555555555555555555557777788888889abcef0000000000000ffd9998888777766666666665544444444
22222222222222224444444444444444444444444445555555555555555555557777788888899adff0000000000000fff9998887777666666666655544444444
222222222222222224444444444444444444444444445555555555555555555557777777888999dfff000000000000fffa998777777666666666655544444444
2222222222222222224444444444444444444444444455555555555555555555556677777889999fff00000000000fffca988666666666666666555544444444
222222222222222222244444444444444444444444445555555555555555555555566677778899bdff0000000000000fdb886666666666555555555444444444
22222222222222222222444444444444444444444444455555555555555555555555666777889abcf000000000000fffff866666666655555555555444444444
22222222222222222222244444444444444444444444455555555555555555555555666777889adeffff0000000ffffffb666666665555555555555444444444
2222222222222222222222444444444444444444444445555555555555555555555556667777ef0fffffffff00fffcdffa666666655555555555555444444444
22222222222222222222222444444444444444444444455555555555555555555555566666666bbdfedffff000ffecbccf666666655555555555555444444444
2222222222222222222222224444444444444444444444555555555555555555555556666666666bfbbccff000ffe99a98666666555555555555555444444444
222222222222222222222222244444444444444444444455555555555555555555555666666666668aabdfff0fff999988666666555555555555555544444444
2222222222222222222222222244444444444444444444555555555555555555555556666666666688999efffffda99887766666555555555555444444444444
22222222222222222222222222244444444444444444445555555555555555555555566666666666689999dfffccb99877766666555555555444444444444444
22222222222222222222222222224444444444444444444444444444455555555555566666666666688999ccffeba98877766555555555544444444333333333
22222222222222222222222222222444444444444444444444444444444455555555556666666666688899bcffebb88877655555555533333333333333333333
2222222222222222222222222222224444444444444444444444444444444455555555555666666667889abdffffc88875555553333333333333333333333333
2222222222222222222222222222222444444444444444444444444444444445555555555566666667889aaffcbeffc855533333333333333333333333333333
222222222222222222222222222222224444444444444444444444444444444445555555555666667779aadfaaad8cfc33333333333333333333333333333333

